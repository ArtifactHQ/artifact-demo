#!/usr/bin/env bash
# Build the base development image for AI coding sessions

set -e

echo "ðŸ”¨ Building Rails 8 Template Development Image..."
echo ""

cd "$(dirname "$0")/.."

# Build with build cache for faster rebuilds
docker build \
  -f Dockerfile.dev \
  -t rails8-template-dev:latest \
  -t "rails8-template-dev:$(date +%Y%m%d-%H%M%S)" \
  --build-arg BUILDKIT_INLINE_CACHE=1 \
  .

echo ""
echo "âœ… Image built successfully!"
echo ""
echo "ðŸ“Š Image details:"
docker images rails8-template-dev:latest

echo ""
echo "ðŸš€ Next steps:"
echo "  â€¢ Test: ./bin/docker-test"
echo "  â€¢ Start: ./bin/docker-start [session-name]"
echo "  â€¢ Or use: docker-compose up"
